
<!doctype html>
<html>
  <head>
    <title>Fbx Animation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
     html,body{
        background: black;
        overflow:hidden;
        margin:0;
        padding: 0;
      }
      </style>

  </head>
  <body>









    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
    <!-- fbx loader -->
    <script src="https://threejs.org/examples/js/libs/inflate.min.js"></script>
    <script src="https://threejs.org/examples/js/loaders/FBXLoader.js"></script>
  
   


    <script>

    

      //===================================================== add canvas
      var scene = new THREE.Scene();
      var renderer = new THREE.WebGLRenderer({
          alpha: true,
          antialias: true
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.shadowMapEnabled = true; //Shadow
      renderer.shadowMapSoft = true; // Shadow
      renderer.shadowMapType = THREE.PCFShadowMap; //Shadow
      document.body.appendChild(renderer.domElement);




      //===================================================== add camera
      var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);



      //===================================================== limit how far you can see below the horion linee
      var controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.maxPolarAngle = Math.PI / 2.5;




      //===================================================== resize
      window.addEventListener("resize", function() {
          let width = window.innerWidth;
          let height = window.innerHeight;
          renderer.setSize(width, height);
          camera.aspect = width / height;
          camera.updateProjectionMatrix();
      });




      //===================================================== add front & back lighting
     var light = new THREE.DirectionalLight(0xefefff, 1.5);
     light.position.set(1, 1, 1).normalize();
     scene.add(light);


     var light = new THREE.DirectionalLight(0xffefef, 1.5);
     light.position.set(-1, -1, -1).normalize();
     scene.add(light);




    //===================================================== add grond
 //===================================================== add ground   
THREE.ImageUtils.crossOrigin = '';
    



var floorMap = THREE.ImageUtils.loadTexture("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTKlUGfuNwrGzmELuY6cbMf4baNaST7cvYdmp6y4ZqJ_-Xc8_q0");
    floorMap.wrapS = floorMap.wrapT = THREE.RepeatWrapping;
    
floorMap.repeat.set( 25, 25 );
   
  

var groundMaterial = new THREE.MeshPhongMaterial( { color: new THREE.Color('#111'), specular: new THREE.Color('#444'), shininess: 100, bumpMap: floorMap } );
    
var groundGeo = new THREE.PlaneGeometry( 500,500 );
    
var ground = new THREE.Mesh( groundGeo, groundMaterial );


    
ground.rotation.x = ( - Math.PI / 2 );
    
ground.receiveShadow  = true;
    
scene.add( ground );




      //===================================================== store all fbx animations in array
      var mixers = [];


      //===================================================== animated fbx files
        var loader = new THREE.FBXLoader();
        loader.load( 'fbx/Camel/Camel-Bite.fbx', function ( object ) {

          object.mixer = new THREE.AnimationMixer( object );
          mixers.push( object.mixer );

          var action = object.mixer.clipAction( object.animations[ 0 ] );
          action.play();

          object.traverse( function ( child ) {
            if ( child.isMesh ) {
              child.castShadow = true;
              child.receiveShadow = true;
              child.scale.set(5, 5, 5); //x,y,z
              child.position.set(0, 0, 0);//x,y,z
            }
          });

          scene.add( object );

        });








      //===================================================== animate model
      var clock  = new THREE.Clock();
      function animateFBX() {
        if ( mixers.length > 0 ) {
          for ( var i = 0; i < mixers.length; i ++ ) {
            mixers[ i ].update( clock.getDelta() );
          }
        }//end mixer
      }




      //===================================================== loop
      function animate() {
          requestAnimationFrame(animate);
          renderer.render(scene, camera);
          controls.update();
          animateFBX();//call the function that animates the model
      }
      animate();



      //===================================================== position camera
      camera.position.z = -75;
      camera.position.y = 50;
      camera.position.x = -50;

    </script>
  </body>
</html>

